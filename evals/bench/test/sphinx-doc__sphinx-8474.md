# sphinx-doc__sphinx-8474

**Repository**: sphinx-doc/sphinx
**Created**: 2020-11-22T16:24:25Z
**Version**: 3.4

## Problem Statement

v3.3 upgrade started generating "WARNING: no number is assigned for table" warnings
We've updated to Sphinx 3.3 in our documentation, and suddenly the following warning started popping up in our builds when we build either `singlehtml` or `latex`.:

`WARNING: no number is assigned for table:`

I looked through the changelog but it didn't seem like there was anything related to `numref` that was changed, but perhaps I missed something? Could anyone point me to a change in the numref logic so I can figure out where these warnings are coming from?


## Hints

I digged into this a little bit more and it seems like the `id` of the table isn't properly making it into `env.toc_fignumbers`. If I set `:name: mylabel`, regardless the I see something like this in `env.toc_fignumbers`

```
 'pagename': {'table': {'id3': (1,)},
```

So it seems like `id3` is being used for the table id instead of `mylabel`
@choldgraf I suspect it's related to this: https://github.com/sphinx-doc/sphinx/commit/66dda1fc50249e9da62e79380251d8795b8e36df.
Oooohhh good find! 👏👏👏
Confirmed that this was the issue - we had been referencing Tables that didn't have a title with `numref`, and this bugfix (I guess it was a bugfix?) caused us to start raising errors. Perhaps this restriction about tables needing a title could be documented more clearly?
The `numfig` option has been described as follows.

>If true, figures, tables and code-blocks are automatically numbered if they have a caption.
https://www.sphinx-doc.org/en/master/usage/configuration.html#confval-numfig

It says a table not having a title is not assigned a number. Then `numfig` can't refer it because of no table number.
> It says a table not having a title is not assigned a number. Then `numfig` can't refer it because of no table number.

This means that a user is not able to add a numbered table with no caption correct? I could understand such restrictions for Jupyter Book but it doesn't make a lot of sense for Sphinx IMO. I think Sphinx should allow users to have enumerable nodes with no caption. What do you think @choldgraf?
>This means that a user is not able to add a numbered table with no caption correct?

Yes. Since the beginning, numfig feature only supports captioned figures and tables. I don't know how many people want to assign numbers to non-captioned items. But this is the first feature request, AFAIK.
I think my take is that I don't think it is super useful to be able to have numbered references for things that don't have titles/captions. However, it also didn't feel like it *shouldn't* be possible, and so I assumed that it was possible (and thus ran into what I thought was a bug). I think it would be more helpful to surface a more informative warning like "You attempted to add a numbered reference to a Table without a title, add a title for this to work." (or, surface this gotcha in the documentation more obviously like with a `warning` or `note` directive?)
@tk0miya @choldgraf both make good points for restricting `figure` and `table` directives with no caption. My issue is that this is done at the enumerable node which implies that **all** enumerable nodes with no title/caption are skipped - not just `figure` and `table`.

> Since the beginning, numfig feature only supports captioned figures and tables.

Just to clarify, `numfig` feature has - prior to v3.3.0 - supported uncaptioned tables but it did not display the caption. The user was able to reference the table using `numref` role (see example below). In the event that the user tried to reference the caption (aka `name` placeholder), Sphinx threw a warning indicating that there was no caption. This solution seemed sensible to me because it allowed other extensions to utilize enumerable nodes regardless of caption/no caption restriction.

My main motivation for wanting to revert back or restrict the bugfix to tables and figures is because both the extensions I've worked on depend on the utilization of enumerable nodes regardless of captions/no captions. I think it wouldn't be too difficult to add the information to `env.toc_fignumbers` but I wanted to make a case before I addressed this in [sphinx-proof](https://github.com/executablebooks/sphinx-proof) and [sphinx-exercise](https://github.com/executablebooks/sphinx-exercise).

**Example**
Sphinx Version - v3.2.1

````md
```{list-table} 
:header-rows: 1
:name: table1

* - Training
  - Validation
* - 0
  - 5
* - 13720
  - 2744
```
Referencing table using `numref`: {numref}`table1`.

```{list-table} Caption here
:header-rows: 1
:name: table2

* - Training
  - Validation
* - 0
  - 5
* - 13720
  - 2744
```
Referencing table using `numref`: {numref}`table2`.
````

<img width="286" alt="Screen Shot 2020-11-10 at 1 13 15 PM" src="https://user-images.githubusercontent.com/33075058/98672880-c8ebfa80-2356-11eb-820f-8c192fcfe1d8.png">
So it sounds like the `tl;dr` from @najuzilu is that in other extensions, she is *using* the fact that you can reference non-captioned elements with a number, and that Sphinx now removing this ability is breaking those extensions. Is that right?
That's correct @choldgraf 
This is a screenshot of the PDF that is generated from @najuzilu 's example with v3.2.1. As you see, it does not work correctly in LaTeX output.
<img width="689" alt="スクリーンショット 2020-11-23 0 44 49" src="https://user-images.githubusercontent.com/748828/99908313-42a3c100-2d25-11eb-9350-ce74e12ef375.png">

I'd not like to support assigning numbers to no captioned items until fixed this (if somebody needs it).

## Patch

```diff

diff --git a/sphinx/domains/std.py b/sphinx/domains/std.py
--- a/sphinx/domains/std.py
+++ b/sphinx/domains/std.py
@@ -852,8 +852,9 @@ def _resolve_numref_xref(self, env: "BuildEnvironment", fromdocname: str,
             if fignumber is None:
                 return contnode
         except ValueError:
-            logger.warning(__("no number is assigned for %s: %s"), figtype, labelid,
-                           location=node)
+            logger.warning(__("Failed to create a cross reference. Any number is not "
+                              "assigned: %s"),
+                           labelid, location=node)
             return contnode
 
         try:


```

## Test Patch

```diff
diff --git a/tests/test_build_html.py b/tests/test_build_html.py
--- a/tests/test_build_html.py
+++ b/tests/test_build_html.py
@@ -660,7 +660,7 @@ def test_numfig_without_numbered_toctree_warn(app, warning):
 
     warnings = warning.getvalue()
     assert 'index.rst:47: WARNING: numfig is disabled. :numref: is ignored.' not in warnings
-    assert 'index.rst:55: WARNING: no number is assigned for section: index' in warnings
+    assert 'index.rst:55: WARNING: Failed to create a cross reference. Any number is not assigned: index' in warnings
     assert 'index.rst:56: WARNING: invalid numfig_format: invalid' in warnings
     assert 'index.rst:57: WARNING: invalid numfig_format: Fig %s %s' in warnings
 
@@ -768,7 +768,7 @@ def test_numfig_with_numbered_toctree_warn(app, warning):
     app.build()
     warnings = warning.getvalue()
     assert 'index.rst:47: WARNING: numfig is disabled. :numref: is ignored.' not in warnings
-    assert 'index.rst:55: WARNING: no number is assigned for section: index' in warnings
+    assert 'index.rst:55: WARNING: Failed to create a cross reference. Any number is not assigned: index' in warnings
     assert 'index.rst:56: WARNING: invalid numfig_format: invalid' in warnings
     assert 'index.rst:57: WARNING: invalid numfig_format: Fig %s %s' in warnings
 
@@ -873,7 +873,7 @@ def test_numfig_with_prefix_warn(app, warning):
     app.build()
     warnings = warning.getvalue()
     assert 'index.rst:47: WARNING: numfig is disabled. :numref: is ignored.' not in warnings
-    assert 'index.rst:55: WARNING: no number is assigned for section: index' in warnings
+    assert 'index.rst:55: WARNING: Failed to create a cross reference. Any number is not assigned: index' in warnings
     assert 'index.rst:56: WARNING: invalid numfig_format: invalid' in warnings
     assert 'index.rst:57: WARNING: invalid numfig_format: Fig %s %s' in warnings
 
@@ -979,7 +979,7 @@ def test_numfig_with_secnum_depth_warn(app, warning):
     app.build()
     warnings = warning.getvalue()
     assert 'index.rst:47: WARNING: numfig is disabled. :numref: is ignored.' not in warnings
-    assert 'index.rst:55: WARNING: no number is assigned for section: index' in warnings
+    assert 'index.rst:55: WARNING: Failed to create a cross reference. Any number is not assigned: index' in warnings
     assert 'index.rst:56: WARNING: invalid numfig_format: invalid' in warnings
     assert 'index.rst:57: WARNING: invalid numfig_format: Fig %s %s' in warnings
 

```

## Test Information

**Tests that should FAIL→PASS**: ["tests/test_build_html.py::test_numfig_without_numbered_toctree_warn", "tests/test_build_html.py::test_numfig_with_numbered_toctree_warn", "tests/test_build_html.py::test_numfig_with_prefix_warn", "tests/test_build_html.py::test_numfig_with_secnum_depth_warn"]

**Tests that should PASS→PASS**: ["tests/test_build_html.py::test_html4_output", "tests/test_build_html.py::test_html5_output[images.html-expect0]", "tests/test_build_html.py::test_html5_output[images.html-expect1]", "tests/test_build_html.py::test_html5_output[images.html-expect2]", "tests/test_build_html.py::test_html5_output[images.html-expect3]", "tests/test_build_html.py::test_html5_output[images.html-expect4]", "tests/test_build_html.py::test_html5_output[subdir/images.html-expect5]", "tests/test_build_html.py::test_html5_output[subdir/images.html-expect6]", "tests/test_build_html.py::test_html5_output[subdir/includes.html-expect7]", "tests/test_build_html.py::test_html5_output[subdir/includes.html-expect8]", "tests/test_build_html.py::test_html5_output[subdir/includes.html-expect9]", "tests/test_build_html.py::test_html5_output[subdir/includes.html-expect10]", "tests/test_build_html.py::test_html5_output[subdir/includes.html-expect11]", "tests/test_build_html.py::test_html5_output[includes.html-expect12]", "tests/test_build_html.py::test_html5_output[includes.html-expect13]", "tests/test_build_html.py::test_html5_output[includes.html-expect14]", "tests/test_build_html.py::test_html5_output[includes.html-expect15]", "tests/test_build_html.py::test_html5_output[includes.html-expect16]", "tests/test_build_html.py::test_html5_output[includes.html-expect17]", "tests/test_build_html.py::test_html5_output[includes.html-expect18]", "tests/test_build_html.py::test_html5_output[includes.html-expect19]", "tests/test_build_html.py::test_html5_output[includes.html-expect20]", "tests/test_build_html.py::test_html5_output[includes.html-expect21]", "tests/test_build_html.py::test_html5_output[includes.html-expect22]", "tests/test_build_html.py::test_html5_output[includes.html-expect23]", "tests/test_build_html.py::test_html5_output[includes.html-expect24]", "tests/test_build_html.py::test_html5_output[autodoc.html-expect25]", "tests/test_build_html.py::test_html5_output[autodoc.html-expect26]", "tests/test_build_html.py::test_html5_output[autodoc.html-expect27]", "tests/test_build_html.py::test_html5_output[autodoc.html-expect28]", "tests/test_build_html.py::test_html5_output[extapi.html-expect29]", "tests/test_build_html.py::test_html5_output[markup.html-expect30]", "tests/test_build_html.py::test_html5_output[markup.html-expect31]", "tests/test_build_html.py::test_html5_output[markup.html-expect32]", "tests/test_build_html.py::test_html5_output[markup.html-expect33]", "tests/test_build_html.py::test_html5_output[markup.html-expect34]", "tests/test_build_html.py::test_html5_output[markup.html-expect35]", "tests/test_build_html.py::test_html5_output[markup.html-expect36]", "tests/test_build_html.py::test_html5_output[markup.html-expect37]", "tests/test_build_html.py::test_html5_output[markup.html-expect38]", "tests/test_build_html.py::test_html5_output[markup.html-expect39]", "tests/test_build_html.py::test_html5_output[markup.html-expect40]", "tests/test_build_html.py::test_html5_output[markup.html-expect41]", "tests/test_build_html.py::test_html5_output[markup.html-expect42]", "tests/test_build_html.py::test_html5_output[markup.html-expect43]", "tests/test_build_html.py::test_html5_output[markup.html-expect44]", "tests/test_build_html.py::test_html5_output[markup.html-expect45]", "tests/test_build_html.py::test_html5_output[markup.html-expect46]", "tests/test_build_html.py::test_html5_output[markup.html-expect47]", "tests/test_build_html.py::test_html5_output[markup.html-expect48]", "tests/test_build_html.py::test_html5_output[markup.html-expect49]", "tests/test_build_html.py::test_html5_output[markup.html-expect50]", "tests/test_build_html.py::test_html5_output[markup.html-expect51]", "tests/test_build_html.py::test_html5_output[markup.html-expect52]", "tests/test_build_html.py::test_html5_output[markup.html-expect53]", "tests/test_build_html.py::test_html5_output[markup.html-expect54]", "tests/test_build_html.py::test_html5_output[markup.html-expect55]", "tests/test_build_html.py::test_html5_output[markup.html-expect56]", "tests/test_build_html.py::test_html5_output[markup.html-expect57]", "tests/test_build_html.py::test_html5_output[markup.html-expect58]", "tests/test_build_html.py::test_html5_output[markup.html-expect59]", "tests/test_build_html.py::test_html5_output[markup.html-expect60]", "tests/test_build_html.py::test_html5_output[markup.html-expect61]", "tests/test_build_html.py::test_html5_output[markup.html-expect62]", "tests/test_build_html.py::test_html5_output[markup.html-expect63]", "tests/test_build_html.py::test_html5_output[markup.html-expect64]", "tests/test_build_html.py::test_html5_output[markup.html-expect65]", "tests/test_build_html.py::test_html5_output[markup.html-expect66]", "tests/test_build_html.py::test_html5_output[markup.html-expect67]", "tests/test_build_html.py::test_html5_output[markup.html-expect68]", "tests/test_build_html.py::test_html5_output[markup.html-expect69]", "tests/test_build_html.py::test_html5_output[markup.html-expect70]", "tests/test_build_html.py::test_html5_output[markup.html-expect71]", "tests/test_build_html.py::test_html5_output[markup.html-expect72]", "tests/test_build_html.py::test_html5_output[markup.html-expect73]", "tests/test_build_html.py::test_html5_output[markup.html-expect74]", "tests/test_build_html.py::test_html5_output[markup.html-expect75]", "tests/test_build_html.py::test_html5_output[markup.html-expect76]", "tests/test_build_html.py::test_html5_output[markup.html-expect77]", "tests/test_build_html.py::test_html5_output[markup.html-expect78]", "tests/test_build_html.py::test_html5_output[markup.html-expect80]", "tests/test_build_html.py::test_html5_output[markup.html-expect81]", "tests/test_build_html.py::test_html5_output[markup.html-expect82]", "tests/test_build_html.py::test_html5_output[markup.html-expect83]", "tests/test_build_html.py::test_html5_output[markup.html-expect84]", "tests/test_build_html.py::test_html5_output[markup.html-expect85]", "tests/test_build_html.py::test_html5_output[objects.html-expect86]", "tests/test_build_html.py::test_html5_output[objects.html-expect87]", "tests/test_build_html.py::test_html5_output[objects.html-expect88]", "tests/test_build_html.py::test_html5_output[objects.html-expect89]", "tests/test_build_html.py::test_html5_output[objects.html-expect90]", "tests/test_build_html.py::test_html5_output[objects.html-expect91]", "tests/test_build_html.py::test_html5_output[objects.html-expect92]", "tests/test_build_html.py::test_html5_output[objects.html-expect93]", "tests/test_build_html.py::test_html5_output[objects.html-expect94]", "tests/test_build_html.py::test_html5_output[objects.html-expect95]", "tests/test_build_html.py::test_html5_output[objects.html-expect96]", "tests/test_build_html.py::test_html5_output[objects.html-expect97]", "tests/test_build_html.py::test_html5_output[objects.html-expect98]", "tests/test_build_html.py::test_html5_output[objects.html-expect99]", "tests/test_build_html.py::test_html5_output[objects.html-expect100]", "tests/test_build_html.py::test_html5_output[objects.html-expect101]", "tests/test_build_html.py::test_html5_output[objects.html-expect102]", "tests/test_build_html.py::test_html5_output[objects.html-expect103]", "tests/test_build_html.py::test_html5_output[objects.html-expect104]", "tests/test_build_html.py::test_html5_output[objects.html-expect105]", "tests/test_build_html.py::test_html5_output[objects.html-expect106]", "tests/test_build_html.py::test_html5_output[objects.html-expect107]", "tests/test_build_html.py::test_html5_output[objects.html-expect108]", "tests/test_build_html.py::test_html5_output[objects.html-expect109]", "tests/test_build_html.py::test_html5_output[objects.html-expect110]", "tests/test_build_html.py::test_html5_output[objects.html-expect111]", "tests/test_build_html.py::test_html5_output[objects.html-expect112]", "tests/test_build_html.py::test_html5_output[objects.html-expect113]", "tests/test_build_html.py::test_html5_output[objects.html-expect114]", "tests/test_build_html.py::test_html5_output[objects.html-expect115]", "tests/test_build_html.py::test_html5_output[objects.html-expect116]", "tests/test_build_html.py::test_html5_output[objects.html-expect117]", "tests/test_build_html.py::test_html5_output[objects.html-expect118]", "tests/test_build_html.py::test_html5_output[objects.html-expect119]", "tests/test_build_html.py::test_html5_output[objects.html-expect120]", "tests/test_build_html.py::test_html5_output[objects.html-expect121]", "tests/test_build_html.py::test_html5_output[objects.html-expect122]", "tests/test_build_html.py::test_html5_output[objects.html-expect123]", "tests/test_build_html.py::test_html5_output[objects.html-expect124]", "tests/test_build_html.py::test_html5_output[objects.html-expect125]", "tests/test_build_html.py::test_html5_output[objects.html-expect126]", "tests/test_build_html.py::test_html5_output[objects.html-expect127]", "tests/test_build_html.py::test_html5_output[objects.html-expect128]", "tests/test_build_html.py::test_html5_output[objects.html-expect129]", "tests/test_build_html.py::test_html5_output[objects.html-expect130]", "tests/test_build_html.py::test_html5_output[objects.html-expect131]", "tests/test_build_html.py::test_html5_output[objects.html-expect132]", "tests/test_build_html.py::test_html5_output[index.html-expect133]", "tests/test_build_html.py::test_html5_output[index.html-expect134]", "tests/test_build_html.py::test_html5_output[index.html-expect137]", "tests/test_build_html.py::test_html5_output[index.html-expect138]", "tests/test_build_html.py::test_html5_output[index.html-expect139]", "tests/test_build_html.py::test_html5_output[index.html-expect140]", "tests/test_build_html.py::test_html5_output[index.html-expect141]", "tests/test_build_html.py::test_html5_output[index.html-expect142]", "tests/test_build_html.py::test_html5_output[index.html-expect143]", "tests/test_build_html.py::test_html5_output[index.html-expect144]", "tests/test_build_html.py::test_html5_output[index.html-expect145]", "tests/test_build_html.py::test_html5_output[index.html-expect146]", "tests/test_build_html.py::test_html5_output[index.html-expect147]", "tests/test_build_html.py::test_html5_output[index.html-expect148]", "tests/test_build_html.py::test_html5_output[bom.html-expect149]", "tests/test_build_html.py::test_html5_output[extensions.html-expect150]", "tests/test_build_html.py::test_html5_output[extensions.html-expect151]", "tests/test_build_html.py::test_html5_output[extensions.html-expect152]", "tests/test_build_html.py::test_html5_output[genindex.html-expect153]", "tests/test_build_html.py::test_html5_output[genindex.html-expect154]", "tests/test_build_html.py::test_html5_output[genindex.html-expect155]", "tests/test_build_html.py::test_html5_output[genindex.html-expect156]", "tests/test_build_html.py::test_html5_output[genindex.html-expect157]", "tests/test_build_html.py::test_html5_output[otherext.html-expect173]", "tests/test_build_html.py::test_html5_output[otherext.html-expect174]", "tests/test_build_html.py::test_html_parallel", "tests/test_build_html.py::test_html_download", "tests/test_build_html.py::test_html_download_role", "tests/test_build_html.py::test_html_translator", "tests/test_build_html.py::test_tocdepth[index.html-expect0]", "tests/test_build_html.py::test_tocdepth[index.html-expect1]", "tests/test_build_html.py::test_tocdepth[index.html-expect2]", "tests/test_build_html.py::test_tocdepth[index.html-expect3]", "tests/test_build_html.py::test_tocdepth[foo.html-expect4]", "tests/test_build_html.py::test_tocdepth[foo.html-expect5]", "tests/test_build_html.py::test_tocdepth[foo.html-expect6]", "tests/test_build_html.py::test_tocdepth[foo.html-expect7]", "tests/test_build_html.py::test_tocdepth[foo.html-expect8]", "tests/test_build_html.py::test_tocdepth[foo.html-expect9]", "tests/test_build_html.py::test_tocdepth[foo.html-expect10]", "tests/test_build_html.py::test_tocdepth[foo.html-expect11]", "tests/test_build_html.py::test_tocdepth[foo.html-expect12]", "tests/test_build_html.py::test_tocdepth[foo.html-expect13]", "tests/test_build_html.py::test_tocdepth[foo.html-expect14]", "tests/test_build_html.py::test_tocdepth[foo.html-expect15]", "tests/test_build_html.py::test_tocdepth[foo.html-expect16]", "tests/test_build_html.py::test_tocdepth[foo.html-expect17]", "tests/test_build_html.py::test_tocdepth[bar.html-expect18]", "tests/test_build_html.py::test_tocdepth[bar.html-expect19]", "tests/test_build_html.py::test_tocdepth[bar.html-expect20]", "tests/test_build_html.py::test_tocdepth[bar.html-expect21]", "tests/test_build_html.py::test_tocdepth[bar.html-expect22]", "tests/test_build_html.py::test_tocdepth[bar.html-expect23]", "tests/test_build_html.py::test_tocdepth[bar.html-expect24]", "tests/test_build_html.py::test_tocdepth[bar.html-expect25]", "tests/test_build_html.py::test_tocdepth[bar.html-expect26]", "tests/test_build_html.py::test_tocdepth[bar.html-expect27]", "tests/test_build_html.py::test_tocdepth[bar.html-expect28]", "tests/test_build_html.py::test_tocdepth[bar.html-expect29]", "tests/test_build_html.py::test_tocdepth[baz.html-expect30]", "tests/test_build_html.py::test_tocdepth[baz.html-expect31]", "tests/test_build_html.py::test_tocdepth_singlehtml[index.html-expect0]", "tests/test_build_html.py::test_tocdepth_singlehtml[index.html-expect1]", "tests/test_build_html.py::test_tocdepth_singlehtml[index.html-expect2]", "tests/test_build_html.py::test_tocdepth_singlehtml[index.html-expect3]", "tests/test_build_html.py::test_tocdepth_singlehtml[index.html-expect4]", "tests/test_build_html.py::test_tocdepth_singlehtml[index.html-expect5]", "tests/test_build_html.py::test_tocdepth_singlehtml[index.html-expect6]", "tests/test_build_html.py::test_tocdepth_singlehtml[index.html-expect7]", "tests/test_build_html.py::test_tocdepth_singlehtml[index.html-expect8]", "tests/test_build_html.py::test_tocdepth_singlehtml[index.html-expect9]", "tests/test_build_html.py::test_tocdepth_singlehtml[index.html-expect10]", "tests/test_build_html.py::test_tocdepth_singlehtml[index.html-expect11]", "tests/test_build_html.py::test_tocdepth_singlehtml[index.html-expect12]", "tests/test_build_html.py::test_tocdepth_singlehtml[index.html-expect13]", "tests/test_build_html.py::test_tocdepth_singlehtml[index.html-expect14]", "tests/test_build_html.py::test_tocdepth_singlehtml[index.html-expect15]", "tests/test_build_html.py::test_tocdepth_singlehtml[index.html-expect16]", "tests/test_build_html.py::test_tocdepth_singlehtml[index.html-expect17]", "tests/test_build_html.py::test_tocdepth_singlehtml[index.html-expect18]", "tests/test_build_html.py::test_tocdepth_singlehtml[index.html-expect19]", "tests/test_build_html.py::test_tocdepth_singlehtml[index.html-expect20]", "tests/test_build_html.py::test_tocdepth_singlehtml[index.html-expect21]", "tests/test_build_html.py::test_tocdepth_singlehtml[index.html-expect22]", "tests/test_build_html.py::test_tocdepth_singlehtml[index.html-expect23]", "tests/test_build_html.py::test_tocdepth_singlehtml[index.html-expect24]", "tests/test_build_html.py::test_numfig_disabled_warn", "tests/test_build_html.py::test_numfig_disabled[index.html-expect0]", "tests/test_build_html.py::test_numfig_disabled[index.html-expect1]", "tests/test_build_html.py::test_numfig_disabled[index.html-expect2]", "tests/test_build_html.py::test_numfig_disabled[index.html-expect3]", "tests/test_build_html.py::test_numfig_disabled[index.html-expect4]", "tests/test_build_html.py::test_numfig_disabled[index.html-expect5]", "tests/test_build_html.py::test_numfig_disabled[index.html-expect6]", "tests/test_build_html.py::test_numfig_disabled[index.html-expect7]", "tests/test_build_html.py::test_numfig_disabled[index.html-expect8]", "tests/test_build_html.py::test_numfig_disabled[index.html-expect9]", "tests/test_build_html.py::test_numfig_disabled[index.html-expect10]", "tests/test_build_html.py::test_numfig_disabled[index.html-expect11]", "tests/test_build_html.py::test_numfig_disabled[index.html-expect12]", "tests/test_build_html.py::test_numfig_disabled[foo.html-expect13]", "tests/test_build_html.py::test_numfig_disabled[foo.html-expect14]", "tests/test_build_html.py::test_numfig_disabled[foo.html-expect15]", "tests/test_build_html.py::test_numfig_disabled[bar.html-expect16]", "tests/test_build_html.py::test_numfig_disabled[bar.html-expect17]", "tests/test_build_html.py::test_numfig_disabled[bar.html-expect18]", "tests/test_build_html.py::test_numfig_disabled[baz.html-expect19]", "tests/test_build_html.py::test_numfig_disabled[baz.html-expect20]", "tests/test_build_html.py::test_numfig_disabled[baz.html-expect21]", "tests/test_build_html.py::test_numfig_without_numbered_toctree[index.html-expect2]", "tests/test_build_html.py::test_numfig_without_numbered_toctree[index.html-expect3]", "tests/test_build_html.py::test_numfig_without_numbered_toctree[index.html-expect4]", "tests/test_build_html.py::test_numfig_without_numbered_toctree[index.html-expect5]", "tests/test_build_html.py::test_numfig_without_numbered_toctree[index.html-expect6]", "tests/test_build_html.py::test_numfig_without_numbered_toctree[index.html-expect7]", "tests/test_build_html.py::test_numfig_without_numbered_toctree[index.html-expect8]", "tests/test_build_html.py::test_numfig_without_numbered_toctree[index.html-expect9]", "tests/test_build_html.py::test_numfig_without_numbered_toctree[index.html-expect10]", "tests/test_build_html.py::test_numfig_without_numbered_toctree[index.html-expect11]", "tests/test_build_html.py::test_numfig_without_numbered_toctree[index.html-expect12]", "tests/test_build_html.py::test_numfig_without_numbered_toctree[index.html-expect13]", "tests/test_build_html.py::test_numfig_without_numbered_toctree[index.html-expect14]", "tests/test_build_html.py::test_numfig_without_numbered_toctree[index.html-expect15]", "tests/test_build_html.py::test_numfig_without_numbered_toctree[foo.html-expect20]", "tests/test_build_html.py::test_numfig_without_numbered_toctree[foo.html-expect21]", "tests/test_build_html.py::test_numfig_without_numbered_toctree[foo.html-expect22]", "tests/test_build_html.py::test_numfig_without_numbered_toctree[foo.html-expect23]", "tests/test_build_html.py::test_numfig_without_numbered_toctree[foo.html-expect24]", "tests/test_build_html.py::test_numfig_without_numbered_toctree[foo.html-expect25]", "tests/test_build_html.py::test_numfig_without_numbered_toctree[foo.html-expect26]", "tests/test_build_html.py::test_numfig_without_numbered_toctree[foo.html-expect27]", "tests/test_build_html.py::test_numfig_without_numbered_toctree[bar.html-expect31]", "tests/test_build_html.py::test_numfig_without_numbered_toctree[bar.html-expect32]", "tests/test_build_html.py::test_numfig_without_numbered_toctree[bar.html-expect33]", "tests/test_build_html.py::test_numfig_without_numbered_toctree[bar.html-expect34]", "tests/test_build_html.py::test_numfig_without_numbered_toctree[bar.html-expect35]", "tests/test_build_html.py::test_numfig_without_numbered_toctree[bar.html-expect36]", "tests/test_build_html.py::test_numfig_without_numbered_toctree[baz.html-expect38]", "tests/test_build_html.py::test_numfig_without_numbered_toctree[baz.html-expect39]", "tests/test_build_html.py::test_numfig_with_numbered_toctree[index.html-expect2]", "tests/test_build_html.py::test_numfig_with_numbered_toctree[index.html-expect3]", "tests/test_build_html.py::test_numfig_with_numbered_toctree[index.html-expect4]", "tests/test_build_html.py::test_numfig_with_numbered_toctree[index.html-expect5]", "tests/test_build_html.py::test_numfig_with_numbered_toctree[index.html-expect6]", "tests/test_build_html.py::test_numfig_with_numbered_toctree[index.html-expect7]", "tests/test_build_html.py::test_numfig_with_numbered_toctree[index.html-expect8]", "tests/test_build_html.py::test_numfig_with_numbered_toctree[index.html-expect9]", "tests/test_build_html.py::test_numfig_with_numbered_toctree[index.html-expect10]", "tests/test_build_html.py::test_numfig_with_numbered_toctree[index.html-expect11]", "tests/test_build_html.py::test_numfig_with_numbered_toctree[index.html-expect12]", "tests/test_build_html.py::test_numfig_with_numbered_toctree[index.html-expect13]", "tests/test_build_html.py::test_numfig_with_numbered_toctree[index.html-expect14]", "tests/test_build_html.py::test_numfig_with_numbered_toctree[index.html-expect15]", "tests/test_build_html.py::test_numfig_with_numbered_toctree[foo.html-expect20]", "tests/test_build_html.py::test_numfig_with_numbered_toctree[foo.html-expect21]", "tests/test_build_html.py::test_numfig_with_numbered_toctree[foo.html-expect22]", "tests/test_build_html.py::test_numfig_with_numbered_toctree[foo.html-expect23]", "tests/test_build_html.py::test_numfig_with_numbered_toctree[foo.html-expect24]", "tests/test_build_html.py::test_numfig_with_numbered_toctree[foo.html-expect25]", "tests/test_build_html.py::test_numfig_with_numbered_toctree[foo.html-expect26]", "tests/test_build_html.py::test_numfig_with_numbered_toctree[foo.html-expect27]", "tests/test_build_html.py::test_numfig_with_numbered_toctree[bar.html-expect31]", "tests/test_build_html.py::test_numfig_with_numbered_toctree[bar.html-expect32]", "tests/test_build_html.py::test_numfig_with_numbered_toctree[bar.html-expect33]", "tests/test_build_html.py::test_numfig_with_numbered_toctree[bar.html-expect34]", "tests/test_build_html.py::test_numfig_with_numbered_toctree[bar.html-expect35]", "tests/test_build_html.py::test_numfig_with_numbered_toctree[bar.html-expect36]", "tests/test_build_html.py::test_numfig_with_numbered_toctree[baz.html-expect38]", "tests/test_build_html.py::test_numfig_with_numbered_toctree[baz.html-expect39]", "tests/test_build_html.py::test_numfig_with_prefix[index.html-expect2]", "tests/test_build_html.py::test_numfig_with_prefix[index.html-expect3]", "tests/test_build_html.py::test_numfig_with_prefix[index.html-expect4]", "tests/test_build_html.py::test_numfig_with_prefix[index.html-expect5]", "tests/test_build_html.py::test_numfig_with_prefix[index.html-expect6]", "tests/test_build_html.py::test_numfig_with_prefix[index.html-expect7]", "tests/test_build_html.py::test_numfig_with_prefix[index.html-expect8]", "tests/test_build_html.py::test_numfig_with_prefix[index.html-expect9]", "tests/test_build_html.py::test_numfig_with_prefix[index.html-expect10]", "tests/test_build_html.py::test_numfig_with_prefix[index.html-expect11]", "tests/test_build_html.py::test_numfig_with_prefix[index.html-expect12]", "tests/test_build_html.py::test_numfig_with_prefix[index.html-expect13]", "tests/test_build_html.py::test_numfig_with_prefix[index.html-expect14]", "tests/test_build_html.py::test_numfig_with_prefix[index.html-expect15]", "tests/test_build_html.py::test_numfig_with_prefix[foo.html-expect20]", "tests/test_build_html.py::test_numfig_with_prefix[foo.html-expect21]", "tests/test_build_html.py::test_numfig_with_prefix[foo.html-expect22]", "tests/test_build_html.py::test_numfig_with_prefix[foo.html-expect23]", "tests/test_build_html.py::test_numfig_with_prefix[foo.html-expect24]", "tests/test_build_html.py::test_numfig_with_prefix[foo.html-expect25]", "tests/test_build_html.py::test_numfig_with_prefix[foo.html-expect26]", "tests/test_build_html.py::test_numfig_with_prefix[foo.html-expect27]", "tests/test_build_html.py::test_numfig_with_prefix[bar.html-expect31]", "tests/test_build_html.py::test_numfig_with_prefix[bar.html-expect32]", "tests/test_build_html.py::test_numfig_with_prefix[bar.html-expect33]", "tests/test_build_html.py::test_numfig_with_prefix[bar.html-expect34]", "tests/test_build_html.py::test_numfig_with_prefix[bar.html-expect35]", "tests/test_build_html.py::test_numfig_with_prefix[bar.html-expect36]", "tests/test_build_html.py::test_numfig_with_prefix[baz.html-expect38]", "tests/test_build_html.py::test_numfig_with_prefix[baz.html-expect39]", "tests/test_build_html.py::test_numfig_with_secnum_depth[index.html-expect2]", "tests/test_build_html.py::test_numfig_with_secnum_depth[index.html-expect3]", "tests/test_build_html.py::test_numfig_with_secnum_depth[index.html-expect4]", "tests/test_build_html.py::test_numfig_with_secnum_depth[index.html-expect5]", "tests/test_build_html.py::test_numfig_with_secnum_depth[index.html-expect6]", "tests/test_build_html.py::test_numfig_with_secnum_depth[index.html-expect7]", "tests/test_build_html.py::test_numfig_with_secnum_depth[index.html-expect8]", "tests/test_build_html.py::test_numfig_with_secnum_depth[index.html-expect9]", "tests/test_build_html.py::test_numfig_with_secnum_depth[index.html-expect10]", "tests/test_build_html.py::test_numfig_with_secnum_depth[index.html-expect11]", "tests/test_build_html.py::test_numfig_with_secnum_depth[index.html-expect12]", "tests/test_build_html.py::test_numfig_with_secnum_depth[index.html-expect13]", "tests/test_build_html.py::test_numfig_with_secnum_depth[index.html-expect14]", "tests/test_build_html.py::test_numfig_with_secnum_depth[index.html-expect15]", "tests/test_build_html.py::test_numfig_with_secnum_depth[foo.html-expect20]", "tests/test_build_html.py::test_numfig_with_secnum_depth[foo.html-expect21]", "tests/test_build_html.py::test_numfig_with_secnum_depth[foo.html-expect22]", "tests/test_build_html.py::test_numfig_with_secnum_depth[foo.html-expect23]", "tests/test_build_html.py::test_numfig_with_secnum_depth[foo.html-expect24]", "tests/test_build_html.py::test_numfig_with_secnum_depth[foo.html-expect25]", "tests/test_build_html.py::test_numfig_with_secnum_depth[foo.html-expect26]", "tests/test_build_html.py::test_numfig_with_secnum_depth[foo.html-expect27]", "tests/test_build_html.py::test_numfig_with_secnum_depth[bar.html-expect31]", "tests/test_build_html.py::test_numfig_with_secnum_depth[bar.html-expect32]", "tests/test_build_html.py::test_numfig_with_secnum_depth[bar.html-expect33]", "tests/test_build_html.py::test_numfig_with_secnum_depth[bar.html-expect34]", "tests/test_build_html.py::test_numfig_with_secnum_depth[bar.html-expect35]", "tests/test_build_html.py::test_numfig_with_secnum_depth[bar.html-expect36]", "tests/test_build_html.py::test_numfig_with_secnum_depth[baz.html-expect38]", "tests/test_build_html.py::test_numfig_with_secnum_depth[baz.html-expect39]", "tests/test_build_html.py::test_numfig_with_singlehtml[index.html-expect2]", "tests/test_build_html.py::test_numfig_with_singlehtml[index.html-expect3]", "tests/test_build_html.py::test_numfig_with_singlehtml[index.html-expect4]", "tests/test_build_html.py::test_numfig_with_singlehtml[index.html-expect5]", "tests/test_build_html.py::test_numfig_with_singlehtml[index.html-expect6]", "tests/test_build_html.py::test_numfig_with_singlehtml[index.html-expect7]", "tests/test_build_html.py::test_numfig_with_singlehtml[index.html-expect8]", "tests/test_build_html.py::test_numfig_with_singlehtml[index.html-expect9]", "tests/test_build_html.py::test_numfig_with_singlehtml[index.html-expect10]", "tests/test_build_html.py::test_numfig_with_singlehtml[index.html-expect11]", "tests/test_build_html.py::test_numfig_with_singlehtml[index.html-expect12]", "tests/test_build_html.py::test_numfig_with_singlehtml[index.html-expect13]", "tests/test_build_html.py::test_numfig_with_singlehtml[index.html-expect14]", "tests/test_build_html.py::test_numfig_with_singlehtml[index.html-expect15]", "tests/test_build_html.py::test_numfig_with_singlehtml[index.html-expect20]", "tests/test_build_html.py::test_numfig_with_singlehtml[index.html-expect21]", "tests/test_build_html.py::test_numfig_with_singlehtml[index.html-expect22]", "tests/test_build_html.py::test_numfig_with_singlehtml[index.html-expect23]", "tests/test_build_html.py::test_numfig_with_singlehtml[index.html-expect24]", "tests/test_build_html.py::test_numfig_with_singlehtml[index.html-expect25]", "tests/test_build_html.py::test_numfig_with_singlehtml[index.html-expect26]", "tests/test_build_html.py::test_numfig_with_singlehtml[index.html-expect27]", "tests/test_build_html.py::test_numfig_with_singlehtml[index.html-expect31]", "tests/test_build_html.py::test_numfig_with_singlehtml[index.html-expect32]", "tests/test_build_html.py::test_numfig_with_singlehtml[index.html-expect33]", "tests/test_build_html.py::test_numfig_with_singlehtml[index.html-expect34]", "tests/test_build_html.py::test_numfig_with_singlehtml[index.html-expect35]", "tests/test_build_html.py::test_numfig_with_singlehtml[index.html-expect36]", "tests/test_build_html.py::test_numfig_with_singlehtml[index.html-expect38]", "tests/test_build_html.py::test_numfig_with_singlehtml[index.html-expect39]", "tests/test_build_html.py::test_enumerable_node[index.html-expect3]", "tests/test_build_html.py::test_enumerable_node[index.html-expect4]", "tests/test_build_html.py::test_enumerable_node[index.html-expect5]", "tests/test_build_html.py::test_enumerable_node[index.html-expect6]", "tests/test_build_html.py::test_enumerable_node[index.html-expect7]", "tests/test_build_html.py::test_enumerable_node[index.html-expect8]", "tests/test_build_html.py::test_enumerable_node[index.html-expect9]", "tests/test_build_html.py::test_html_assets", "tests/test_build_html.py::test_html_copy_source", "tests/test_build_html.py::test_html_sourcelink_suffix", "tests/test_build_html.py::test_html_sourcelink_suffix_same", "tests/test_build_html.py::test_html_sourcelink_suffix_empty", "tests/test_build_html.py::test_html_entity", "tests/test_build_html.py::test_html_inventory", "tests/test_build_html.py::test_html_raw_directive", "tests/test_build_html.py::test_alternate_stylesheets[index.html-expect0]", "tests/test_build_html.py::test_alternate_stylesheets[index.html-expect1]", "tests/test_build_html.py::test_alternate_stylesheets[index.html-expect2]", "tests/test_build_html.py::test_alternate_stylesheets[index.html-expect3]", "tests/test_build_html.py::test_alternate_stylesheets[index.html-expect4]", "tests/test_build_html.py::test_alternate_stylesheets[index.html-expect5]", "tests/test_build_html.py::test_alternate_stylesheets[index.html-expect6]", "tests/test_build_html.py::test_alternate_stylesheets[index.html-expect7]", "tests/test_build_html.py::test_html_style", "tests/test_build_html.py::test_html_remote_images", "tests/test_build_html.py::test_html_sidebar", "tests/test_build_html.py::test_html_manpage[index.html-expect0]", "tests/test_build_html.py::test_html_manpage[index.html-expect1]", "tests/test_build_html.py::test_html_manpage[index.html-expect2]", "tests/test_build_html.py::test_html_baseurl", "tests/test_build_html.py::test_html_baseurl_and_html_file_suffix", "tests/test_build_html.py::test_default_html_math_renderer", "tests/test_build_html.py::test_html_math_renderer_is_mathjax", "tests/test_build_html.py::test_html_math_renderer_is_imgmath", "tests/test_build_html.py::test_html_math_renderer_is_duplicated", "tests/test_build_html.py::test_html_math_renderer_is_duplicated2", "tests/test_build_html.py::test_html_math_renderer_is_chosen", "tests/test_build_html.py::test_html_math_renderer_is_mismatched", "tests/test_build_html.py::test_html_pygments_style_default", "tests/test_build_html.py::test_html_pygments_style_manually", "tests/test_build_html.py::test_html_pygments_for_classic_theme", "tests/test_build_html.py::test_html_dark_pygments_style_default", "tests/test_build_html.py::test_validate_html_extra_path", "tests/test_build_html.py::test_validate_html_static_path", "tests/test_build_html.py::test_html_scaled_image_link", "tests/test_build_html.py::test_html_codeblock_linenos_style_inline"]

**Base Commit**: 3ea1ec84cc610f7a9f4f6b354e264565254923ff
**Environment Setup Commit**: 3f560cd67239f75840cc7a439ab54d8509c855f6
